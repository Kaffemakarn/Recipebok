<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="../template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"          
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
    <script src="https://smartlock.google.com/client"></script>
    <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <h:outputStylesheet library="css" name="default.css"  />
    <h:outputStylesheet library="css" name="profile.css"  />
    <h:outputStylesheet library="css" name="addCookbookStyle.css"/>
    
   
    <ui:define name="content"> 
        <f:metadata>
            <f:viewParam name="email" value="#{userbean.tmp.email}"/>
            <f:viewAction action="#{userbean.setUser()}"/>
        </f:metadata>
        
        <b:container >
            <b:row>
                <b:column span="12">
                    <h2 style="margin-bottom: 0;text-align: center;margin-bottom: 0;"> Profile</h2>
                    <!--<h2>#{userbean.tmp.email}</h2>-->
                </b:column>
            </b:row>
            <b:row>
                
            </b:row>
            <b:row>
                <b:jumbotron style="height:250px;background-image: url(../resources/img/welcome_banner.jpg);background-size: cover; background-position: center center;"> 
                    <p style="color: #FFFFFF; text-align: center;margin-bottom: 0;font-size: 22pt;">My Cookbooks</p>
                </b:jumbotron>
            </b:row>
        </b:container>
               
         <b:row>
            <b:form id="createCookbook">

                <b:inputText id="test" value="#{userbean.tmp.email}" style="display:none;" />
                <b:inputText id="test2" value="#{cookbookbean.userEmail}" style="display:none;"/>
                <b:inputText id="cookbookName" value="#{cookbookbean.tmp.name}" size="10" span="2" placeholder="Cookbook name" required="true" />
                <b:commandButton value='Create'  look="primary" span="1"
                                 onclick="testing()"
                                 action="#{cookbookbean.add()}"/>
            </b:form>
        </b:row>
        
        
        <b:container style="background-color: #EEEEEE;">
            <b:row style="margin:10px;">
                <b:dataTable 
                    id="cookbookTable" 
                    var="c"
                    value="#{cookbookbean.findByUser(userbean.tmp)}"
                    striped="true"
                    page-length-menu="5,10,20"
                    page-length="5">
                    
                    <b:dataTableColumn label="Image" style="width:160px;" orderable="false">
                        <b:thumbnail>
                            <b:image value="resources/img/recipeboook.png" style="height:150px; width: 65%;"/>
                            
                        </b:thumbnail>
                    </b:dataTableColumn>

                    <b:dataTableColumn label="Cookbook Title" style="width:500px;" id="cookbookTitleTable">
                        <h3>#{c.name}</h3>
                    </b:dataTableColumn>
                    
                    <b:dataTableColumn label="Delete" style="width:100px;" id="cookbookDeleteTable">
                        <b:form>
                             <b:icon name="trash" onclick='#{cookbookbean.delete()}'/> 
                        </b:form>
                       
                    </b:dataTableColumn>
                    
                </b:dataTable>
              </b:row>
       </b:container>
        
        
         <b:container style="background-color: #EEEEEE;">
            <b:row style="margin:10px;">
                <b:dataTable 
                    id="recipesTable" 
                    var="re"
                    value="#{recipebean.findByUser(userbean.tmp) }"
                    striped="true"
                    page-length-menu="5,10,20"
                    page-length="5">
                    
                    <b:dataTableColumn label="Image" style="width:160px;" orderable="false">
                        <b:thumbnail>
                            <b:image value="resources/img/recipeboook.png" style="height:150px; width: 65%;"/>
                            
                        </b:thumbnail>
                    </b:dataTableColumn>

                    <b:dataTableColumn label="Recipe Title" style="width:500px;" id="recipeTitleTable">
                        <h3>#{re.name}</h3>
                    </b:dataTableColumn>
                    
                    <b:dataTableColumn label="Delete" style="width:100px;" id="cookbookDeleteTable">
                        <b:form>
                             <b:icon name="trash" onclick='#{cookbookbean.delete()}'/> 
                        </b:form>
                       
                    </b:dataTableColumn>
                    
                </b:dataTable>
              </b:row>
       </b:container>
        
        <script>
        function testing () {
                    document.getElementById("input_createCookbook:test2").value = document.getElementById("input_createCookbook:test").value;
                    console.log(document.getElementById("input_createCookbook:test2").value)
                }    
        </script>
            
    </ui:define>
    
    <div>Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
</ui:composition>


